{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/home/tmaltus/Documents/BlockChainProjects/dotNetworkBlockInfo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proposals = proposals;\nexports.proposal = proposal;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nfunction parse(api, _ref) {\n  var _ref2 = _slicedToArray(_ref, 3),\n      hashes = _ref2[0],\n      proposals = _ref2[1],\n      votes = _ref2[2];\n\n  return proposals.map(function (proposalOpt, index) {\n    return proposalOpt && proposalOpt.isSome ? {\n      hash: api.registry.createType('Hash', hashes[index]),\n      proposal: proposalOpt.unwrap(),\n      votes: votes[index].unwrapOr(null)\n    } : null;\n  }).filter(function (proposal) {\n    return !!proposal;\n  });\n}\n\nfunction _proposalsFrom(instanceId, api) {\n  var section = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'council';\n  return (0, _util2.memo)(instanceId, function (hashes) {\n    var _api$query$section;\n\n    return ((0, _util.isFunction)((_api$query$section = api.query[section]) === null || _api$query$section === void 0 ? void 0 : _api$query$section.proposals) && hashes.length ? (0, _rxjs.combineLatest)([(0, _rxjs.of)(hashes), (0, _rxjs.combineLatest)(hashes.map(function (hash) {\n      return (// this should simply be api.query[section].proposalOf.multi<Option<Proposal>>(hashes),\n        // however we have had cases on Edgeware where the indices have moved around after an\n        // upgrade, which results in invalid on-chain data\n        api.query[section].proposalOf(hash).pipe((0, _operators.catchError)(function () {\n          return (0, _rxjs.of)(null);\n        }))\n      );\n    })), api.query[section].voting.multi(hashes)]) : (0, _rxjs.of)([[], [], []])).pipe((0, _operators.map)(function (result) {\n      return parse(api, result);\n    }));\n  });\n}\n\nfunction proposals(instanceId, api) {\n  var section = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'council';\n\n  var proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, function () {\n    var _api$query$section2;\n\n    return (0, _util.isFunction)((_api$query$section2 = api.query[section]) === null || _api$query$section2 === void 0 ? void 0 : _api$query$section2.proposals) ? api.query[section].proposals().pipe((0, _operators.switchMap)(proposalsFrom)) : (0, _rxjs.of)([]);\n  });\n}\n\nfunction proposal(instanceId, api) {\n  var section = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'council';\n\n  var proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, function (hash) {\n    var _api$query$section3;\n\n    return (0, _util.isFunction)((_api$query$section3 = api.query[section]) === null || _api$query$section3 === void 0 ? void 0 : _api$query$section3.proposals) ? proposalsFrom([hash]).pipe((0, _operators.map)(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 1),\n          proposal = _ref4[0];\n\n      return proposal;\n    })) : (0, _rxjs.of)(null);\n  });\n}","map":{"version":3,"sources":["/home/tmaltus/Documents/BlockChainProjects/dotNetworkBlockInfo/node_modules/@polkadot/api-derive/collective/proposals.js"],"names":["Object","defineProperty","exports","value","proposals","proposal","_rxjs","require","_operators","_util","_util2","parse","api","hashes","votes","map","proposalOpt","index","isSome","hash","registry","createType","unwrap","unwrapOr","filter","_proposalsFrom","instanceId","section","memo","_api$query$section","isFunction","query","length","combineLatest","of","proposalOf","pipe","catchError","voting","multi","result","proposalsFrom","_api$query$section2","switchMap","_api$query$section3"],"mappings":"AAAA;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,SAAR,GAAoBA,SAApB;AACAF,OAAO,CAACG,QAAR,GAAmBA,QAAnB;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AAEA,IAAIC,UAAU,GAAGD,OAAO,CAAC,gBAAD,CAAxB;;AAEA,IAAIE,KAAK,GAAGF,OAAO,CAAC,gBAAD,CAAnB;;AAEA,IAAIG,MAAM,GAAGH,OAAO,CAAC,SAAD,CAApB,C,CAEA;AACA;;;AACA,SAASI,KAAT,CAAeC,GAAf,QAAgD;AAAA;AAAA,MAA3BC,MAA2B;AAAA,MAAnBT,SAAmB;AAAA,MAARU,KAAQ;;AAC9C,SAAOV,SAAS,CAACW,GAAV,CAAc,UAACC,WAAD,EAAcC,KAAd;AAAA,WAAwBD,WAAW,IAAIA,WAAW,CAACE,MAA3B,GAAoC;AAC/EC,MAAAA,IAAI,EAAEP,GAAG,CAACQ,QAAJ,CAAaC,UAAb,CAAwB,MAAxB,EAAgCR,MAAM,CAACI,KAAD,CAAtC,CADyE;AAE/EZ,MAAAA,QAAQ,EAAEW,WAAW,CAACM,MAAZ,EAFqE;AAG/ER,MAAAA,KAAK,EAAEA,KAAK,CAACG,KAAD,CAAL,CAAaM,QAAb,CAAsB,IAAtB;AAHwE,KAApC,GAIzC,IAJiB;AAAA,GAAd,EAIGC,MAJH,CAIU,UAAAnB,QAAQ;AAAA,WAAI,CAAC,CAACA,QAAN;AAAA,GAJlB,CAAP;AAKD;;AAED,SAASoB,cAAT,CAAwBC,UAAxB,EAAoCd,GAApC,EAA8D;AAAA,MAArBe,OAAqB,uEAAX,SAAW;AAC5D,SAAO,CAAC,GAAGjB,MAAM,CAACkB,IAAX,EAAiBF,UAAjB,EAA6B,UAAAb,MAAM,EAAI;AAC5C,QAAIgB,kBAAJ;;AAEA,WAAO,CAAC,CAAC,GAAGpB,KAAK,CAACqB,UAAV,EAAsB,CAACD,kBAAkB,GAAGjB,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,CAAtB,MAA8C,IAA9C,IAAsDE,kBAAkB,KAAK,KAAK,CAAlF,GAAsF,KAAK,CAA3F,GAA+FA,kBAAkB,CAACzB,SAAxI,KAAsJS,MAAM,CAACmB,MAA7J,GAAsK,CAAC,GAAG1B,KAAK,CAAC2B,aAAV,EAAyB,CAAC,CAAC,GAAG3B,KAAK,CAAC4B,EAAV,EAAcrB,MAAd,CAAD,EAAwB,CAAC,GAAGP,KAAK,CAAC2B,aAAV,EAAyBpB,MAAM,CAACE,GAAP,CAAW,UAAAI,IAAI;AAAA,aAAI;AAC3Q;AACA;AACAP,QAAAA,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,EAAmBQ,UAAnB,CAA8BhB,IAA9B,EAAoCiB,IAApC,CAAyC,CAAC,GAAG5B,UAAU,CAAC6B,UAAf,EAA2B;AAAA,iBAAM,CAAC,GAAG/B,KAAK,CAAC4B,EAAV,EAAc,IAAd,CAAN;AAAA,SAA3B,CAAzC;AAHuQ;AAAA,KAAf,CAAzB,CAAxB,EAGpGtB,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,EAAmBW,MAAnB,CAA0BC,KAA1B,CAAgC1B,MAAhC,CAHoG,CAAzB,CAAtK,GAGuI,CAAC,GAAGP,KAAK,CAAC4B,EAAV,EAAc,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAAd,CAHxI,EAGqKE,IAHrK,CAG0K,CAAC,GAAG5B,UAAU,CAACO,GAAf,EAAoB,UAAAyB,MAAM;AAAA,aAAI7B,KAAK,CAACC,GAAD,EAAM4B,MAAN,CAAT;AAAA,KAA1B,CAH1K,CAAP;AAID,GAPM,CAAP;AAQD;;AAED,SAASpC,SAAT,CAAmBsB,UAAnB,EAA+Bd,GAA/B,EAAyD;AAAA,MAArBe,OAAqB,uEAAX,SAAW;;AACvD,MAAMc,aAAa,GAAGhB,cAAc,CAACC,UAAD,EAAad,GAAb,EAAkBe,OAAlB,CAApC;;AAEA,SAAO,CAAC,GAAGjB,MAAM,CAACkB,IAAX,EAAiBF,UAAjB,EAA6B,YAAM;AACxC,QAAIgB,mBAAJ;;AAEA,WAAO,CAAC,GAAGjC,KAAK,CAACqB,UAAV,EAAsB,CAACY,mBAAmB,GAAG9B,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,CAAvB,MAA+C,IAA/C,IAAuDe,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACtC,SAA3I,IAAwJQ,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,EAAmBvB,SAAnB,GAA+BgC,IAA/B,CAAoC,CAAC,GAAG5B,UAAU,CAACmC,SAAf,EAA0BF,aAA1B,CAApC,CAAxJ,GAAwO,CAAC,GAAGnC,KAAK,CAAC4B,EAAV,EAAc,EAAd,CAA/O;AACD,GAJM,CAAP;AAKD;;AAED,SAAS7B,QAAT,CAAkBqB,UAAlB,EAA8Bd,GAA9B,EAAwD;AAAA,MAArBe,OAAqB,uEAAX,SAAW;;AACtD,MAAMc,aAAa,GAAGhB,cAAc,CAACC,UAAD,EAAad,GAAb,EAAkBe,OAAlB,CAApC;;AAEA,SAAO,CAAC,GAAGjB,MAAM,CAACkB,IAAX,EAAiBF,UAAjB,EAA6B,UAAAP,IAAI,EAAI;AAC1C,QAAIyB,mBAAJ;;AAEA,WAAO,CAAC,GAAGnC,KAAK,CAACqB,UAAV,EAAsB,CAACc,mBAAmB,GAAGhC,GAAG,CAACmB,KAAJ,CAAUJ,OAAV,CAAvB,MAA+C,IAA/C,IAAuDiB,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACxC,SAA3I,IAAwJqC,aAAa,CAAC,CAACtB,IAAD,CAAD,CAAb,CAAsBiB,IAAtB,CAA2B,CAAC,GAAG5B,UAAU,CAACO,GAAf,EAAoB;AAAA;AAAA,UAAEV,QAAF;;AAAA,aAAgBA,QAAhB;AAAA,KAApB,CAA3B,CAAxJ,GAAoO,CAAC,GAAGC,KAAK,CAAC4B,EAAV,EAAc,IAAd,CAA3O;AACD,GAJM,CAAP;AAKD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proposals = proposals;\nexports.proposal = proposal;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\");\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nfunction parse(api, [hashes, proposals, votes]) {\n  return proposals.map((proposalOpt, index) => proposalOpt && proposalOpt.isSome ? {\n    hash: api.registry.createType('Hash', hashes[index]),\n    proposal: proposalOpt.unwrap(),\n    votes: votes[index].unwrapOr(null)\n  } : null).filter(proposal => !!proposal);\n}\n\nfunction _proposalsFrom(instanceId, api, section = 'council') {\n  return (0, _util2.memo)(instanceId, hashes => {\n    var _api$query$section;\n\n    return ((0, _util.isFunction)((_api$query$section = api.query[section]) === null || _api$query$section === void 0 ? void 0 : _api$query$section.proposals) && hashes.length ? (0, _rxjs.combineLatest)([(0, _rxjs.of)(hashes), (0, _rxjs.combineLatest)(hashes.map(hash => // this should simply be api.query[section].proposalOf.multi<Option<Proposal>>(hashes),\n    // however we have had cases on Edgeware where the indices have moved around after an\n    // upgrade, which results in invalid on-chain data\n    api.query[section].proposalOf(hash).pipe((0, _operators.catchError)(() => (0, _rxjs.of)(null))))), api.query[section].voting.multi(hashes)]) : (0, _rxjs.of)([[], [], []])).pipe((0, _operators.map)(result => parse(api, result)));\n  });\n}\n\nfunction proposals(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, () => {\n    var _api$query$section2;\n\n    return (0, _util.isFunction)((_api$query$section2 = api.query[section]) === null || _api$query$section2 === void 0 ? void 0 : _api$query$section2.proposals) ? api.query[section].proposals().pipe((0, _operators.switchMap)(proposalsFrom)) : (0, _rxjs.of)([]);\n  });\n}\n\nfunction proposal(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, hash => {\n    var _api$query$section3;\n\n    return (0, _util.isFunction)((_api$query$section3 = api.query[section]) === null || _api$query$section3 === void 0 ? void 0 : _api$query$section3.proposals) ? proposalsFrom([hash]).pipe((0, _operators.map)(([proposal]) => proposal)) : (0, _rxjs.of)(null);\n  });\n}"]},"metadata":{},"sourceType":"script"}