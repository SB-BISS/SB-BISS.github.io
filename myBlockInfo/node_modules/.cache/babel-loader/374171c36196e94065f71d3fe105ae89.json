{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proposals = proposals;\nexports.proposal = proposal;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nfunction parse(api, [hashes, proposals, votes]) {\n  return proposals.map((proposalOpt, index) => proposalOpt && proposalOpt.isSome ? {\n    hash: api.registry.createType('Hash', hashes[index]),\n    proposal: proposalOpt.unwrap(),\n    votes: votes[index].unwrapOr(null)\n  } : null).filter(proposal => !!proposal);\n}\n\nfunction _proposalsFrom(instanceId, api, section = 'council') {\n  return (0, _util2.memo)(instanceId, hashes => {\n    var _api$query$section;\n\n    return ((0, _util.isFunction)((_api$query$section = api.query[section]) === null || _api$query$section === void 0 ? void 0 : _api$query$section.proposals) && hashes.length ? (0, _rxjs.combineLatest)([(0, _rxjs.of)(hashes), (0, _rxjs.combineLatest)(hashes.map(hash => // this should simply be api.query[section].proposalOf.multi<Option<Proposal>>(hashes),\n    // however we have had cases on Edgeware where the indices have moved around after an\n    // upgrade, which results in invalid on-chain data\n    api.query[section].proposalOf(hash).pipe((0, _operators.catchError)(() => (0, _rxjs.of)(null))))), api.query[section].voting.multi(hashes)]) : (0, _rxjs.of)([[], [], []])).pipe((0, _operators.map)(result => parse(api, result)));\n  });\n}\n\nfunction proposals(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, () => {\n    var _api$query$section2;\n\n    return (0, _util.isFunction)((_api$query$section2 = api.query[section]) === null || _api$query$section2 === void 0 ? void 0 : _api$query$section2.proposals) ? api.query[section].proposals().pipe((0, _operators.switchMap)(proposalsFrom)) : (0, _rxjs.of)([]);\n  });\n}\n\nfunction proposal(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, hash => {\n    var _api$query$section3;\n\n    return (0, _util.isFunction)((_api$query$section3 = api.query[section]) === null || _api$query$section3 === void 0 ? void 0 : _api$query$section3.proposals) ? proposalsFrom([hash]).pipe((0, _operators.map)(([proposal]) => proposal)) : (0, _rxjs.of)(null);\n  });\n}","map":{"version":3,"sources":["/home/tmaltus/Documents/BlockChainProjects/dotNetworkBlockInfo/node_modules/@polkadot/api-derive/collective/proposals.js"],"names":["Object","defineProperty","exports","value","proposals","proposal","_rxjs","require","_operators","_util","_util2","parse","api","hashes","votes","map","proposalOpt","index","isSome","hash","registry","createType","unwrap","unwrapOr","filter","_proposalsFrom","instanceId","section","memo","_api$query$section","isFunction","query","length","combineLatest","of","proposalOf","pipe","catchError","voting","multi","result","proposalsFrom","_api$query$section2","switchMap","_api$query$section3"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proposals = proposals;\nexports.proposal = proposal;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\");\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nfunction parse(api, [hashes, proposals, votes]) {\n  return proposals.map((proposalOpt, index) => proposalOpt && proposalOpt.isSome ? {\n    hash: api.registry.createType('Hash', hashes[index]),\n    proposal: proposalOpt.unwrap(),\n    votes: votes[index].unwrapOr(null)\n  } : null).filter(proposal => !!proposal);\n}\n\nfunction _proposalsFrom(instanceId, api, section = 'council') {\n  return (0, _util2.memo)(instanceId, hashes => {\n    var _api$query$section;\n\n    return ((0, _util.isFunction)((_api$query$section = api.query[section]) === null || _api$query$section === void 0 ? void 0 : _api$query$section.proposals) && hashes.length ? (0, _rxjs.combineLatest)([(0, _rxjs.of)(hashes), (0, _rxjs.combineLatest)(hashes.map(hash => // this should simply be api.query[section].proposalOf.multi<Option<Proposal>>(hashes),\n    // however we have had cases on Edgeware where the indices have moved around after an\n    // upgrade, which results in invalid on-chain data\n    api.query[section].proposalOf(hash).pipe((0, _operators.catchError)(() => (0, _rxjs.of)(null))))), api.query[section].voting.multi(hashes)]) : (0, _rxjs.of)([[], [], []])).pipe((0, _operators.map)(result => parse(api, result)));\n  });\n}\n\nfunction proposals(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, () => {\n    var _api$query$section2;\n\n    return (0, _util.isFunction)((_api$query$section2 = api.query[section]) === null || _api$query$section2 === void 0 ? void 0 : _api$query$section2.proposals) ? api.query[section].proposals().pipe((0, _operators.switchMap)(proposalsFrom)) : (0, _rxjs.of)([]);\n  });\n}\n\nfunction proposal(instanceId, api, section = 'council') {\n  const proposalsFrom = _proposalsFrom(instanceId, api, section);\n\n  return (0, _util2.memo)(instanceId, hash => {\n    var _api$query$section3;\n\n    return (0, _util.isFunction)((_api$query$section3 = api.query[section]) === null || _api$query$section3 === void 0 ? void 0 : _api$query$section3.proposals) ? proposalsFrom([hash]).pipe((0, _operators.map)(([proposal]) => proposal)) : (0, _rxjs.of)(null);\n  });\n}"]},"metadata":{},"sourceType":"script"}